---
share: true
---

# Pin-hole model

## Concept
- 现实世界物体：相机坐标系下的表示$P_c=[x, y, z]$
- 焦距 f：光心到物理成像平面的距离
- 像素点：$P_{uv}=[u, v]$，固定于物理成像平面的像素平面上。像素是成像之后的点经过采样和量化之后生成的，物理成像平面相差一个缩放和偏移。其由现实世界物体经过相机内参K获得，定义为：
  $$ 
 K=\begin{bmatrix} 
   \alpha_x & x_0      & 0  \\
   0        & \alpha_y & y_0  \\
   0        & 0     & 1  \\
 \end{bmatrix}
 $$
其中，$\alpha_x$和$\alpha_y$是x和y轴的scaling factor，$x_0$和$y_0$是光轴和归一化平面的交点在归一化平面的坐标点
只能和归一化的空间点相乘得到像素坐标。

## Usage

$\underline{世界坐标到相机坐标}$
1. 世界坐标系的物体$P_w=[X, Y, Z, 1]$
2. 利用相机位姿求得相机坐标系下的坐标，$P_c=TP_w=[X_c, Y_c, Z_c, 1]$，其中$T$是4x4相机位姿矩阵。
3. $P_c$和$P_w$都是齐次坐标。

$\underline{相机坐标到像素坐标}$
1. 空间点归一化：把$P_c$前三位取出，然后归一化，获得$norm(P_c)$，这个点在归一化平面上。
2. 利用$P_{uv} = K*norm(P_c)$获得像素平面的像素坐标$P_{uv}$，可以看做是归一化空间点在像素平面的成像和采样。

$\underline{Projection \ Matrix}$
1. 建立从世界坐标到像素坐标的关系，把上面的两个转换结合起来，$P_{uv}=P*P_w$。
2. 利用$P_{uv} = K*[R|T]*P_w$，我们可以得到$P = K*[R | T]$，是一个3x4的矩阵。
3. Ref：Multiple View Geometry in Computer Vision, eq 6.8。

# Fisheye Model

# 畸变

## 畸变模型
- 径向畸变：由透镜边缘的形状引起，可以分为桶形畸变和枕形畸变。可以利用多项式描述
$$ 
x = x(1 + k_1r^2 + k_2r^4 + k_3r^6)
$$
其中r是归一化平面上离中心点的距离。
- 径向畸变：可以利用多项式描述
$$ 
x = x + 2p_1xy + p_2(r^2 + x^2)
$$
- Ref 十四讲 eq 5.11，5.12

## 去畸变
1. 把空间点投到归一化平面，$norm(P_c)$。
2. 把归一化平面上的空间点坐标进行径向和切向修正，$norm(P_c)_{corr}$。
3. 把归一化平面上的像素点通过内参矩阵投影到像素平面，$P_{uv,corr}$

# 双目

$$z=\frac{fb}{d}$$
其中，z：深度，f：焦距，b：baseline和视差反比关系。d：视差$u_L - u_R$。

# RGB-D
能够在线的获得每个像素的深度值。成像方式包括：
- 主动发射红外光
- 结构光：通过分析返回的结构光图案获得距离
- ToF：分析返回的时间

容易受环境影响，不适合室外SLAM